<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link rel="icon" href="/singularity/favicon.ico" sizes="16x16 32x32 48x48 64x64" type="image/vnd.microsoft.icon">
    <title>Singularity</title>

    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function() {
            $('.faq_question').click(function() {
                if ($(this).parent().is('.open')){
                    $(this).closest('.faq').find('.faq_answer_container').animate({'height':'0'},500);
                    $(this).closest('.faq').removeClass('open');
                }else{
                    var newHeight = ($(this).closest('.faq').find('.faq_answer').height() + 40) +'px';
                    $(this).closest('.faq').find('.faq_answer_container').animate({'height':newHeight},500);
                    $(this).closest('.faq').addClass('open');
                }
            });
        });
    </script>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <img src="images/singularity_logo1.png" border="0"/>
        <p></p>

<p>
<strong>&raquo;&nbsp;<a href="index.html">Home</a></strong><br/>
<strong>&raquo;&nbsp;<a href="about.html">About</a></strong><br/>
<strong>&raquo;&nbsp;<a href="use-cases.html">Use Cases</a></strong><br/>
<strong>&raquo;&nbsp;<a href="docs.html">Documentation</a></strong><br/>
<strong>&raquo;&nbsp;<a href="help.html">Getting help</a></strong><br/>
<strong>&raquo;&nbsp;<a href="download.html">Download</a></strong><br/>
</p>

        <p></p>
      </header>
      <section>
&laquo;&nbsp;<a href="docs.html">Back to Documentation</a>
<h1>FAQ</h1>
<p>


<div class="faq_container">
<div class="faq">
<div class="faq_question">Which namespaces are virtualized? Is that selectable?</div>
<div class="faq_answer_container">
<div class="faq_answer">
<p>
The goal of Singularity is to run an application within a contained
environment such as it was not contained. Thus there is a balance between
what to seperate and what not to seperate. At present the virtualized
namespaces are process, mount points, and certain parts of the contained
file system.
</p>
<p>
When you run your Singularity application, you may find that the process
IDs start with 1 (one) and increment from there. You will also find that
while the file system is contained starting with '/' (root), you can have
access outside the container via your starting path. This means that
relative paths will resolve outside the container, and fully qualified
paths will resolve inside the container.
</p>
</div>
</div>
</div>
</div>



<div class="faq_container">
<div class="faq">
<div class="faq_question">How does Singularity relate/differ from Shifter?</div>
<div class="faq_answer_container">
<div class="faq_answer">
<p>
NERSC (like most HPC centers) are feeling the pressure from users asking
for support for containers, specifically Docker. Due to the architecture
of Docker it is very difficult (if not impossible) to properly and
securely implement in a multi-user HPC environment. Shifter is NERSC's
implementation to provide a Docker front-end interface to a non-Docker
backend which integrates with the scheduler to provide a contiguous
workflow and integration.
</p>
<p>
Singularity on the other hand does not leverage the Docker workflow or
front end at all and generally works on a very different premise. Instead
of packaging the entire operating system to support a single application
(or workflow/pipeline) Singularity only packages what it needs to run, and
wraps that into a format that can be interacted on like any other program on
the system. For example, there is no need to integrate it into a
scheduler or make any system changes because it can be run like any other
application. This means it can simply be called by the user within a
batch submission script.
</p>
</div>
</div>
</div>
</div>



<div class="faq_container">
<div class="faq">
<div class="faq_question">How does Singulairty relate/differ from Docker?</div>
<div class="faq_answer_container">
<div class="faq_answer">
<p>
Similiar to Singularity, Docker has two major functions: image management
and a runtime architecture. But the technologies and architectures for doing
both are very different.
</p>
<p>
Docker supports entire operating system images for containers and Singularity
focuses on building process specific application based containers. Docker's
containers have the capability of escalating privledges and running within the
container as root, Singularity containers can not escalate privledges. Docker
is an operating system virtualization technology where Singularity abstracts
out the container so interaction with the container feels like interacting
with a standard program or script on the host system. Docker is a containment
solution built to create seperation from the host and other containers, where
Singularity is designed to allow the container to run like any application
such that standard permissions, workflows and processes can be used.
</p>
</div>
</div>
</div>
</div>



<div class="faq_container">
<div class="faq">
<div class="faq_question">How does Singulairty relate/differ from statically compiled binaries?</div>
<div class="faq_answer_container">
<div class="faq_answer">
<p>
Statically compiled binaries are a good comparasion to what Singularity can do
for a single program because it will package up all of the dynamic libraries
and package them into a single executable (intrepreted) format.
</p>
<p>
But because Singularity is actually wrapping things up in a container, you can
do much more with it... Such as include other files, scripts, workflows, pipe
lines, data, and multi program processes and package them into a single
portable executable format.
</p>
</div>
</div>
</div>
</div>



<div class="faq_container">
<div class="faq">
<div class="faq_question">Can you edit/modity a Singularity container once it has been instantiated?</div>
<div class="faq_answer_container">
<div class="faq_answer">
<p>
No. While technically you could modify a SAPP container cache, it would then
invalidate the checksums and would appear as corrupt to Singularity.
</p>
</div>
</div>
</div>
</div>



<div class="faq_container">
<div class="faq">
<div class="faq_question">Can multiple applications be packaged into one Singularity Container?</div>
<div class="faq_answer_container">
<div class="faq_answer">
<p>
Yes! You can even create entire pipe lines and work flows using many
applications, binaries, scripts, etc.. Look into the %runscript specfile
section to define what happens when a Singularity container is run.
</p>
</div>
</div>
</div>
</div>



<div class="faq_container">
<div class="faq">
<div class="faq_question">Are Singularity containers kernel dependent?</div>
<div class="faq_answer_container">
<div class="faq_answer">
<p>
No, never. But sometimes yes. A good rule of thumb is, if you can run on a
default vanilla kernel.org kernel, then there are probably no kernel
dependencies you will need to consider.
</p>
<p>
But, in the end Singularity is using container principals so if you are
leveraging any kernel version or external patches/module functionality
(e.g. OFED), then yes there maybe kernel dependencies you will need to
consider.
</p>
<p>
note: If you require kernel dependent features, a container platform is
probably not the right solution for you.
</p>
</div>
</div>
</div>
</div>



<div class="faq_container">
<div class="faq">
<div class="faq_question">How are external filesystems and paths handled in a Singularity Container?</div>
<div class="faq_answer_container">
<div class="faq_answer">
<p>
Because Singularity is based on container principals, when an application
is run from within a Singularity container it's default view of the file
system is different from how it is on the host system. This is what allows the
envrionment to be portable. This means that root ('/') inside the container
*MUST* be different from the host. However it is possible to bridge (and
differentiate) these two root file systems using relative paths Vs. full
paths. When specify a file location to your Singularity application (SAPP)
on your host file system, pass the relative path (any path that does not
start with a slash '/').
</p>
</div>
</div>
</div>
</div>



<div class="faq_container">
<div class="faq">
<div class="faq_question">What is the difference between full and relative paths?</div>
<div class="faq_answer_container">
<div class="faq_answer">
<p>
See the above answer to "How are external filesystems and paths handled
in a Singularity Container?".
</p>
</div>
</div>
</div>
</div>



<div class="faq_container">
<div class="faq">
<div class="faq_question">How does Singularity handle manage networking?</div>
<div class="faq_answer_container">
<div class="faq_answer">
<p>
Singularity does no network isolation because it is designed to run like any
other application on the system. It has all of the same networking privledges
as any program running as that user.
</p>
</div>
</div>
</div>
</div>



<div class="faq_container">
<div class="faq">
<div class="faq_question">Can I run X11 apps through Singularity?</div>
<div class="faq_answer_container">
<div class="faq_answer">
<p>
In theory yes. This is still being tested.
</p>
</div>
</div>
</div>
</div>



<div class="faq_container">
<div class="faq">
<div class="faq_question">Can a Singularity resolve GLIBC version mismatches?</div>
<div class="faq_answer_container">
<div class="faq_answer">
<p>
Yes. Singularity containers contain their own library stack (including the
Glibc version that they require to run).
</p>
</div>
</div>
</div>
</div>



<div class="faq_container">
<div class="faq">
<div class="faq_question">Can a Singularity container be multi-threaded?</div>
<div class="faq_answer_container">
<div class="faq_answer">
<p>
Yes. Singularity imposes no limitations on forks, threads or processes in
general.
</p>
</div>
</div>
</div>
</div>



<div class="faq_container">
<div class="faq">
<div class="faq_question">Can a Singularity container be suspended or checkpointed?</div>
<div class="faq_answer_container">
<div class="faq_answer">
<p>
Yes and maybe respectively. Any Singularity application can be suspended using
standard Linux/Unix signals. Checkpointing requires some preloaded libraries
to be automatically loaded with the application but because Singularity escapes
the hosts library stack, the checkpoint libraries would not be loaded. If
however you wanted to make a Singularity container that can be checkpointed,
you would need to install the checkpoint libraries into the Singularity
container via the specfile.
</p>
</div>
</div>
</div>
</div>



<div class="faq_container">
<div class="faq">
<div class="faq_question">Are there any special requirements to use Singularity through a job scheduler?</div>
<div class="faq_answer_container">
<div class="faq_answer">
<p>
No, Singularity containers can be run via any job scheduler with no
modifications to the scheduler configuration or architecture. This is because
Singularity containers are designed to be run like any application on the
system.
</p>
</div>
</div>
</div>
</div>



<div class="faq_container">
<div class="faq">
<div class="faq_question">Are there any special security concerns that Singularity introduces?</div>
<div class="faq_answer_container">
<div class="faq_answer">
<p>
No and yes.
</p>
<p>
Even though Singularity uses container principals, the Singularity containers
are not full operating systems. They have no means to escalate privledges
inheritantly internally. Also, Singularity contexts are always run as the user
running them which means there is no risk with allowing the containers to
have access and interact with the host's file system.
</p>
<p>
While there is no daemon running as root, or any persistent processes which
may be used to escalate privledges (e.g. Docker), there is a need to run some
system calls as root in order to achieve encapsulation of the container. For
this part of the run flow there is a single binary which is setuid called
Sexec (Singularity Exec). This binary has been made as simple and small as
absolutely possible, and has been audited by multiple security experts. If you
have a knack for security, we welcome any feedback or comments on the source
code which can be found here:
<a href="https://github.com/gmkurtzer/singularity/blob/master/src/sexec.c">https://github.com/gmkurtzer/singularity/blob/master/src/sexec.c</a>
</p>
</div>
</div>
</div>
</div>



<div class="faq_container">
<div class="faq">
<div class="faq_question">What Linux distributions are you trying to get onboard?</div>
<div class="faq_answer_container">
<div class="faq_answer">
<p>
All of them! Help us out by letting them know you want Singularity to be
included!
</p>
</div>
</div>
</div>
</div>



<div class="faq_container">
<div class="faq">
<div class="faq_question">What is the performance tradeoff when running an appication native or through Singularity?</div>
<div class="faq_answer_container">
<div class="faq_answer">
<p>
So far we have no identified any, but we are still investigating.
</p>
<p>
On a related note, what we have found so far is that not all operating systems
are created equal in terms of their build envrionment and optimized toolchains.
RedHat for example has a very optimal tool chain which they use for their
Enterprise product line and it is not available to other distributions (or
rebuilds) and thus their resulting binaries and libraries have been more
performant then other Linux distributions we have tested.
</p>
</div>
</div>
</div>
</div>



<div class="faq_container">
<div class="faq">
<div class="faq_question">What is the fastest land animal?</div>
<div class="faq_answer_container">
<div class="faq_answer">
<p>
La Cheeta.
</p>
</div>
</div>
</div>
</div>



<div class="faq_container">
<div class="faq">
<div class="faq_question">What is the average air speed velocity of an unladen swallow?</div>
<div class="faq_answer_container">
<div class="faq_answer">
<p>
Thanks Jason!
<br/>&nbsp;<br/>
<a target="_blank" href="http://style.org/unladenswallow/">http://style.org/unladenswallow/</a>
</p>
</div>
</div>
</div>
</div>



</p>

      </section>
      <footer>
        <p>
            <small>
                Project lead: <a href="https://gmkurtzer.github.io">Gregory M. Kurtzer</a><br/>
                Sponsored by: <a href="http://scs.lbl.gov/">HPC @ LBNL</a><br/>
                Hosted on: <a href="https://github.com">GitHub</a>
            </small>
        </p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
